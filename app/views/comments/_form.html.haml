- if @comment.nil?
  - @comment = Comment.new(commentable: commentable)
.comment-form
  - if @comment.new_record?
    .form-group
      - form_dom_id = SecureRandom.hex(3)
      %input.form-control{type: 'text', placeholder: '의견을 남겨 주세요', data: { action: 'bubble-show-form', 'target-form': '.comment-form form', focus: ".comment-form form #{ user_signed_in? ? '#comment_body' : '#comment_guest_name'}"}}

  = form_for @comment do |f|
    = f.hidden_field :commentable_id
    = f.hidden_field :commentable_type
    - if user_signed_in?
      .user-info
        %strong= current_user.name
        당원
    - else
      .row
        .col-xs-6
          .form-group
            = f.text_field :guest_name, class: 'form-control', placeholder: '이름' ,data: {'rule-required': true}
        .col-xs-6
          .form-group
            = f.email_field :guest_email, class: 'form-control' , placeholder: '이메일(선택사항)'
    .form-group
      = f.text_area :body, class: 'form-control', placeholder: '댓글을 입력해주세요.' , data: {'rule-required': true, action: 'parti-autoresize'}
    .row
      .col-sm-8
        - if !user_signed_in? and @comment.new_record?
          .form-group.recaptcha
            .help-block 스팸 방지를 위해 사람인지 확인합니다. 아래 체크 박스를 클릭해 주세요.
            = hidden_field_tag :hiddenRecaptcha, nil
            .bubble-recaptcha
      .col-sm-4.text-right
        - if @comment.new_record?
          = f.submit '등록', class: 'btn btn-primary btn-comment-submit', data: { disable_with: "게시 중..." }
        - else
          = link_to '취소', @comment.commentable, class: 'link-cacel'
          = f.submit '수정', class: 'btn btn-primary btn-comment-submit btn-comment-submit--update', data: { disable_with: "게시 중..." }
